

<div id="game-container" class="game-container">
  <!-- This is where the content of the inner shortcode will be rendered -->
  {{ .Inner }}

  <!-- Fullscreen Toggle Button -->
  <button id="fullscreen-btn">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-5v4m0 0h-4m0 0l-5-5m5 5l-5-5m5 5l5 5M4 16v4m0 0h4M4 20l5-5m11 5v-4m0 0h-4m4 4l-5-5"/>
    </svg>
    Fullscreen
  </button>
</div>

<script>
  // Wait for the DOM content to be fully loaded before running the script
  document.addEventListener('DOMContentLoaded', () => {
    const gameContainer = document.getElementById('game-container');
    const fullscreenBtn = document.getElementById('fullscreen-btn');

    // This function handles entering fullscreen mode
    const enterFullscreen = () => {
      if (gameContainer.requestFullscreen) {
        gameContainer.requestFullscreen();
      } else if (gameContainer.webkitRequestFullscreen) { /* Safari */
        gameContainer.webkitRequestFullscreen();
      } else if (gameContainer.msRequestFullscreen) { /* IE11 */
        gameContainer.msRequestFullscreen();
      }
    };

    // This function handles exiting fullscreen mode
    const exitFullscreen = () => {
      if (document.exitFullscreen) {
        document.exitFullscreen();
      } else if (document.webkitExitFullscreen) { /* Safari */
        document.webkitExitFullscreen();
      } else if (document.msExitFullscreen) { /* IE11 */
        document.msExitFullscreen();
      }
    };

    // Add a click event listener to the fullscreen button
    if (fullscreenBtn) {
      fullscreenBtn.addEventListener('click', () => {
        if (!document.fullscreenElement) {
          enterFullscreen();
        } else {
          exitFullscreen();
        }
      });
    }

    // Listen for the fullscreen change event to update the button text and container class
    document.addEventListener('fullscreenchange', () => {
      if (document.fullscreenElement) {
        gameContainer.classList.add('fullscreen');
        if (fullscreenBtn) {
          fullscreenBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m-2 2l-2-2m-2-2l-2-2m-2 2l-2-2m2 2l-2-2m-2 2l-2-2m2 2l-2-2m-2 2l-2-2m2 2l-2-2m-2 2l-2-2m2 2l-2-2m-2 2l-2-2m2 2l-2-2m-2 2l-2-2m2 2l-2-2"/></svg>Exit Fullscreen';
        }
      } else {
        gameContainer.classList.remove('fullscreen');
        if (fullscreenBtn) {
          fullscreenBtn.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 inline-block mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8V4m0 0h4M4 4l5 5m11-5v4m0 0h-4m0 0l-5-5m5 5l-5-5m5 5l5 5M4 16v4m0 0h4M4 20l5-5m11 5v-4m0 0h-4m4 4l-5-5"/></svg>Fullscreen';
        }
      }
    });

    // Handle vendor-prefixed fullscreenchange events for broader browser support
    document.addEventListener('mozfullscreenchange', () => { /* Firefox */
      if (document.mozFullScreenElement) {
        gameContainer.classList.add('fullscreen');
      } else {
        gameContainer.classList.remove('fullscreen');
      }
    });

    document.addEventListener('webkitfullscreenchange', () => { /* Safari, Chrome */
      if (document.webkitFullscreenElement) {
        gameContainer.classList.add('fullscreen');
      } else {
        gameContainer.classList.remove('fullscreen');
      }
    });

    document.addEventListener('msfullscreenchange', () => { /* IE11 */
      if (document.msFullscreenElement) {
        gameContainer.classList.add('fullscreen');
      } else {
        gameContainer.classList.remove('fullscreen');
      }
    });
  });
</script>

<style>
  /* Base styles for the game container */
  .game-container {
    position: relative;
    width: 100%;
    /* Use a fixed aspect ratio for a responsive, letterboxed effect */
    padding-top: 56.25%; /* 16:9 Aspect Ratio */
    background-color: #1a202c; /* A dark gray background */
    border-radius: 1rem;
    overflow: hidden;
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    transition: all 0.3s ease-in-out;
  }
  
  /* The inner content (the game) will be absolutely positioned to fill the container */
  .game-container > * {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }

  /* Styles for the fullscreen button */
  #fullscreen-btn {
    position: absolute;
    bottom: 1rem;
    right: 1rem;
    z-index: 10;
    padding: 0.5rem 1rem;
    background-color: #2563eb;
    color: #fff;
    font-weight: bold;
    border: none;
    border-radius: 9999px; /* A large value for a full rounded effect */
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
    cursor: pointer;
    transition: background-color 0.2s ease-in-out;
    width: 18%;
    height: 18%
  }

  #fullscreen-btn:hover {
    background-color: #1e40af;
  }

  #fullscreen-btn:focus {
    outline: none;
    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.5);
  }

  /* Styles for the container when in fullscreen mode */
  .game-container.fullscreen {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 9999;
    border-radius: 0;
    max-width: none;
    padding-top: 0; /* Remove the aspect-ratio padding */
  }

  /* Style for the svg icon */
  #fullscreen-btn svg {
    display: inline-block;
    vertical-align: middle;
    margin-right: 0.5rem;
    width: 1.5rem;
    height: 1.5rem;
  }

  #fullscreen-btn path {
    stroke-width: 2;
  }

</style>
